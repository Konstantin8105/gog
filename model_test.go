package gog

import (
	"fmt"
	"io/ioutil"
	"os"
)

func ExampleModel() {
	var m Model
	var state int
	// view result in dxf format
	view := func() {
		if err := ioutil.WriteFile(fmt.Sprintf("stage%02d.dxf", state), []byte(m.Dxf()), 0644); err != nil {
			panic(err)
		}
		state++
	}
	// create model
	m.AddCircle(0, 0, 1, 1)
	m.AddLine(Point{-1, 0}, Point{1, 0}, 2)
	m.AddLine(Point{0, -1}, Point{0, 1}, 3)
	fmt.Fprintf(os.Stdout, "Only structural lines:\n%s", m)
	view() // 0
	m.Intersection()
	view() // 1
	m.Split(0.2)
	view() // 2
	m.ArcsToLines()
	view() // 3
	m.RemoveEmptyPoints()
	view() // 4
	m.ConvexHullTriangles()
	view() // 5
	m.Intersection()
	view() // 6
	m.RemoveEmptyPoints()
	view() // 7
	m.Triangles = nil
	mesh, err := New(m)
	if err != nil {
		fmt.Fprintf(os.Stdout, "Error: %v\n", err)
		return
	}
	m.Get(mesh)
	view() // 8
	fmt.Fprintf(os.Stdout, "After intersection:\n%s", m)
	fmt.Fprintf(os.Stdout, "Minimal distance between points:\n%.4f", m.MinPointDistance())
	// Output:
	// Only structural lines:
	// Points:
	// 000	{+0.0000 -1.0000}
	// 001	{+1.0000 +0.0000}
	// 002	{+0.0000 +1.0000}
	// 003	{-1.0000 +0.0000}
	// Lines:
	// 000	[  3   1   2]
	// 001	[  0   2   3]
	// Arcs:
	// 000	[  0   1   2   1]
	// 001	[  2   3   0   1]
	// After intersection:
	// Points:
	// 000	{+0.0000 -1.0000}
	// 001	{+1.0000 +0.0000}
	// 002	{+0.0000 +1.0000}
	// 003	{-1.0000 +0.0000}
	// 004	{+0.0000 +0.0000}
	// 005	{-0.7071 +0.7071}
	// 006	{-0.7071 -0.7071}
	// 007	{+0.7071 -0.7071}
	// 008	{+0.7071 +0.7071}
	// 009	{+0.0000 -0.8333}
	// 010	{+0.0000 -0.6667}
	// 011	{+0.0000 -0.5000}
	// 012	{+0.0000 -0.3333}
	// 013	{+0.0000 -0.1667}
	// 014	{+0.0000 +0.1667}
	// 015	{+0.0000 +0.3333}
	// 016	{+0.0000 +0.5000}
	// 017	{+0.0000 +0.6667}
	// 018	{+0.0000 +0.8333}
	// 019	{-0.8333 +0.0000}
	// 020	{-0.6667 +0.0000}
	// 021	{-0.5000 +0.0000}
	// 022	{-0.3333 +0.0000}
	// 023	{-0.1667 +0.0000}
	// 024	{+0.1667 +0.0000}
	// 025	{+0.3333 +0.0000}
	// 026	{+0.5000 +0.0000}
	// 027	{+0.6667 +0.0000}
	// 028	{+0.8333 +0.0000}
	// 029	{-0.1951 +0.9808}
	// 030	{-0.3827 +0.9239}
	// 031	{-0.5556 +0.8315}
	// 032	{-0.8315 +0.5556}
	// 033	{-0.9239 +0.3827}
	// 034	{-0.9808 +0.1951}
	// 035	{-0.9808 -0.1951}
	// 036	{-0.9239 -0.3827}
	// 037	{-0.8315 -0.5556}
	// 038	{-0.5556 -0.8315}
	// 039	{-0.3827 -0.9239}
	// 040	{-0.1951 -0.9808}
	// 041	{+0.1951 -0.9808}
	// 042	{+0.3827 -0.9239}
	// 043	{+0.5556 -0.8315}
	// 044	{+0.8315 -0.5556}
	// 045	{+0.9239 -0.3827}
	// 046	{+0.9808 -0.1951}
	// 047	{+0.9808 +0.1951}
	// 048	{+0.9239 +0.3827}
	// 049	{+0.8315 +0.5556}
	// 050	{+0.5556 +0.8315}
	// 051	{+0.3827 +0.9239}
	// 052	{+0.1951 +0.9808}
	// Lines:
	// 000	[  0   9   3]
	// 001	[  9  10   3]
	// 002	[ 10  11   3]
	// 003	[ 11  12   3]
	// 004	[ 12  13   3]
	// 005	[ 13   4   3]
	// 006	[  4  14   3]
	// 007	[ 14  15   3]
	// 008	[ 15  16   3]
	// 009	[ 16  17   3]
	// 010	[ 17  18   3]
	// 011	[ 18   2   3]
	// 012	[  3  19   2]
	// 013	[ 19  20   2]
	// 014	[ 20  21   2]
	// 015	[ 21  22   2]
	// 016	[ 22  23   2]
	// 017	[ 23   4   2]
	// 018	[  4  24   2]
	// 019	[ 24  25   2]
	// 020	[ 25  26   2]
	// 021	[ 26  27   2]
	// 022	[ 27  28   2]
	// 023	[ 28   1   2]
	// 024	[  2  29   1]
	// 025	[ 29  30   1]
	// 026	[ 30  31   1]
	// 027	[ 31   5   1]
	// 028	[  5  32   1]
	// 029	[ 32  33   1]
	// 030	[ 33  34   1]
	// 031	[ 34   3   1]
	// 032	[  3  35   1]
	// 033	[ 35  36   1]
	// 034	[ 36  37   1]
	// 035	[ 37   6   1]
	// 036	[  6  38   1]
	// 037	[ 38  39   1]
	// 038	[ 39  40   1]
	// 039	[ 40   0   1]
	// 040	[  0  41   1]
	// 041	[ 41  42   1]
	// 042	[ 42  43   1]
	// 043	[ 43   7   1]
	// 044	[  7  44   1]
	// 045	[ 44  45   1]
	// 046	[ 45  46   1]
	// 047	[ 46   1   1]
	// 048	[  1  47   1]
	// 049	[ 47  48   1]
	// 050	[ 48  49   1]
	// 051	[ 49   8   1]
	// 052	[  8  50   1]
	// 053	[ 50  51   1]
	// 054	[ 51  52   1]
	// 055	[ 52   2   1]
	// Triangles:
	// 000	[  0  42  41   0]
	// 001	[  0  43  42   0]
	// 002	[  0   7  43   0]
	// 003	[  0  44   7   0]
	// 004	[  0  45  44   0]
	// 005	[  0  46  45   0]
	// 006	[  0   1  46   0]
	// 007	[  0  48  47   0]
	// 008	[  0  51  50   0]
	// 009	[  0  31  30   0]
	// 010	[  0  34  33   0]
	// 011	[  0  35   3   0]
	// 012	[  0  36  35   0]
	// 013	[  0  37  36   0]
	// 014	[  0   6  37   0]
	// 015	[  0  38   6   0]
	// 016	[  0  39  38   0]
	// 017	[  0  40  39   0]
	// 018	[ 52   0   9   0]
	// 019	[  0  29   9   0]
	// 020	[ 52   9  10   0]
	// 021	[  9  29  10   0]
	// 022	[ 52  10  11   0]
	// 023	[ 10  29  11   0]
	// 024	[ 52  11  12   0]
	// 025	[ 11  29  12   0]
	// 026	[  4  52  13   0]
	// 027	[ 52  12  13   0]
	// 028	[ 12  29  13   0]
	// 029	[ 29   4  13   0]
	// 030	[ 52   4  14   0]
	// 031	[  4  29  14   0]
	// 032	[ 52  14  15   0]
	// 033	[ 14  29  15   0]
	// 034	[ 52  15  16   0]
	// 035	[ 15  29  16   0]
	// 036	[ 52  16  17   0]
	// 037	[ 16  29  17   0]
	// 038	[  2  52  18   0]
	// 039	[ 52  17  18   0]
	// 040	[ 17  29  18   0]
	// 041	[ 29   2  18   0]
	// 042	[  0   3  19   0]
	// 043	[  3  34  19   0]
	// 044	[ 34   0  19   0]
	// 045	[  0  33  20   0]
	// 046	[ 33  32  20   0]
	// 047	[ 32   0  20   0]
	// 048	[  0  32  21   0]
	// 049	[ 32   5  21   0]
	// 050	[  5   0  21   0]
	// 051	[  0   5  22   0]
	// 052	[  5  31  22   0]
	// 053	[ 31   0  22   0]
	// 054	[  0  30  23   0]
	// 055	[ 30  29  23   0]
	// 056	[ 29   0  23   0]
	// 057	[  0  52  24   0]
	// 058	[ 52  51  24   0]
	// 059	[ 51   0  24   0]
	// 060	[  0  50  25   0]
	// 061	[ 50   8  25   0]
	// 062	[  8   0  25   0]
	// 063	[  0   8  26   0]
	// 064	[  8  49  26   0]
	// 065	[ 49   0  26   0]
	// 066	[  0  49  27   0]
	// 067	[ 49  48  27   0]
	// 068	[ 48   0  27   0]
	// 069	[  0  47  28   0]
	// 070	[ 47   1  28   0]
	// 071	[  1   0  28   0]
	// Minimal distance between points:
	// 0.1667
}
